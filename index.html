<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galaxia de Amor 3D</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background: radial-gradient(circle at center, #050010, #000000);
    font-family: Arial, sans-serif;
}

#mensaje{
    position:absolute;
    top:15px;
    width:100%;
    text-align:center;
    color:white;
    font-size:22px;
    background:rgba(255,255,255,0.08);
    padding:12px;
    border-radius:20px;
    backdrop-filter:blur(8px);
    z-index:10;
}
</style>
</head>

<body>

<div id="mensaje">Te Amo Muchote Mi Ojitos Brillantes ‚ô•Ô∏è</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://threejs.org/examples/js/loaders/FontLoader.js"></script>
<script src="https://threejs.org/examples/js/geometries/TextGeometry.js"></script>

<script>
let scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000010, 80, 1800);

let camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.1, 4000);
camera.position.z = 260;

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.outputEncoding = THREE.sRGBEncoding;
document.body.appendChild(renderer.domElement);

/* ---------------- LUCES ---------------- */

const ambient = new THREE.AmbientLight(0x6666ff, 1.1);
scene.add(ambient);

const centerLight = new THREE.PointLight(0xff66ff, 5, 1500);
centerLight.position.set(0,0,0);
scene.add(centerLight);

const glowLight = new THREE.PointLight(0x00ccff, 2.5, 1000);
glowLight.position.set(120,120,120);
scene.add(glowLight);

/* ---------------- N√öCLEO CENTRAL ---------------- */

const coreGeo = new THREE.SphereGeometry(16, 128, 128);
const coreMat = new THREE.MeshPhysicalMaterial({
    color:0xff66ff,
    emissive:0xaa00ff,
    emissiveIntensity:3,
    roughness:0.05,
    metalness:0.9,
    clearcoat:1,
    clearcoatRoughness:0.02
});
const core = new THREE.Mesh(coreGeo, coreMat);
scene.add(core);

/* ---------------- FRASES ---------------- */

const frases = [
"Mi Amor ‚ô•Ô∏è","Mi Vida ‚ú®","Mi Cielo ü•∫","Eres Mi mundo",
"Mi Princesa üëë","Mi Coraz√≥n","Mi Tesoro üíé","Mi Universo üåå",
"Te Amo Muchote","Mi Estrellita ‚≠ê","Mi Bonita üëâüèªüëàüèª",
"Mi Infinito ‚ôæÔ∏è","Mi Sue√±o üí≠","Mi Luz üåü",
"Mi Destino üí´","Contigo Todo",
"Mi Felicidad üå∏","Mi Paz",
"Mi Todo Bonito üíù","Mi Reina üëë",
"Mi Casualidad Favorita",
"Mi Locura üòç","Mi √Ångelito",
"Mi Eternidad"
];

const grupo = new THREE.Group();
scene.add(grupo);

const loader = new THREE.FontLoader();
const textos = [];

loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', font=>{

    for(let i=0;i<280;i++){

        const txt = frases[Math.floor(Math.random()*frases.length)];

        const geo = new THREE.TextGeometry(txt,{
            font:font,
            size:1.7,
            height:0.35,
            curveSegments:12
        });

        const mat = new THREE.MeshStandardMaterial({
            color:0xffffff,
            emissive:0x5555ff,
            emissiveIntensity:1.8,
            metalness:0.7,
            roughness:0.15
        });

        const mesh = new THREE.Mesh(geo,mat);

        const radius = 160 + Math.random()*220;
        const angle = Math.random()*Math.PI*2;
        const height = (Math.random()-0.5)*120;

        mesh.userData = {
            radius,
            angle,
            speed: 0.0008 + Math.random()*0.0015,
            height
        };

        mesh.position.set(
            Math.cos(angle)*radius,
            height,
            Math.sin(angle)*radius
        );

        grupo.add(mesh);
        textos.push(mesh);
    }
});

/* ---------------- ESTRELLAS ---------------- */

const starGeo = new THREE.BufferGeometry();
const starCount = 9000;
const pos = [];

for(let i=0;i<starCount;i++){
    pos.push((Math.random()-0.5)*4000);
    pos.push((Math.random()-0.5)*4000);
    pos.push((Math.random()-0.5)*4000);
}

starGeo.setAttribute('position', new THREE.Float32BufferAttribute(pos,3));
const starMat = new THREE.PointsMaterial({color:0xffffff,size:1.3});
const stars = new THREE.Points(starGeo,starMat);
scene.add(stars);

/* ---------------- CONTROL MANUAL ---------------- */

let isDragging = false;
let prevX = 0;
let prevY = 0;

function startDrag(x,y){
    isDragging = true;
    prevX = x;
    prevY = y;
}

function dragMove(x,y){
    if(!isDragging) return;
    const dx = x - prevX;
    const dy = y - prevY;

    grupo.rotation.y += dx * 0.005;
    grupo.rotation.x += dy * 0.005;

    prevX = x;
    prevY = y;
}

function endDrag(){
    isDragging = false;
}

/* Mouse */
document.addEventListener("mousedown",e=>startDrag(e.clientX,e.clientY));
document.addEventListener("mousemove",e=>dragMove(e.clientX,e.clientY));
document.addEventListener("mouseup",endDrag);

/* Touch */
document.addEventListener("touchstart",e=>{
    const t = e.touches[0];
    startDrag(t.clientX,t.clientY);
});
document.addEventListener("touchmove",e=>{
    const t = e.touches[0];
    dragMove(t.clientX,t.clientY);
});
document.addEventListener("touchend",endDrag);

/* ---------------- ANIMACI√ìN ---------------- */

function animate(){
    requestAnimationFrame(animate);

    // n√∫cleo vivo
    core.rotation.y += 0.002;
    const pulse = 1 + Math.sin(Date.now()*0.003)*0.07;
    core.scale.set(pulse,pulse,pulse);

    // √≥rbita gal√°ctica
    textos.forEach(t=>{
        t.userData.angle += t.userData.speed;
        t.position.x = Math.cos(t.userData.angle)*t.userData.radius;
        t.position.z = Math.sin(t.userData.angle)*t.userData.radius;
        t.position.y = t.userData.height + Math.sin(Date.now()*0.002)*4;
        t.lookAt(0, t.position.y, 0); // orientaci√≥n suave
    });

    renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{
    renderer.setSize(window.innerWidth,window.innerHeight);
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
});
</script>

</body>
</html>
